generate: bashly generate --upgrade && op man
#? regenerate script

watch: op generate --watch
#? watch files and regenerate script on change

test: docker compose run test
#? run tests in a container

shellcheck: shellcheck rush setup && echo "PASS"
#? run shellcheck tests

shfmt: shfmt -ci -i 2 -d rush setup && echo "PASS"
#? run shfmt tests

man: bashly render :mandoc doc
#? Render the man pages

man-link: for file in doc/*.1; do sudo ln -sf "$(realpath "$file")" /usr/share/man/man1/; done
#? Symlink all man pages

version: \
  sed -i "s/$(rush --version)/$1/g" README.md src/bashly.yml && \
  bashly g && \
  git commit -am "version bump $1" && \
  git tag v$1
#? update version, regenerate and tag
#? usage: op version NEW_VERSION

changelog: git changelog --save ; cat .changelog.old.md >> CHANGELOG.md
#? update changelog

